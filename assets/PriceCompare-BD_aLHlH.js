import{r as c,j as n,R as j,b as X,C as je,e as Ie,f as Te,h as Re,t as Y,i as V}from"./index-BZeRRfUF.js";import{c as U,e as H,u as z,q as Se,i as be,T as we,t as Pe,D as Ne,k as Ge,l as Ee,o as Ae,p as Fe,m as _e,n as Me}from"./dropdown-menu-CQC7dNhA.js";import{B as q,P as Oe}from"./PageLayout-Cb-dYZ6r.js";import{I as De,S as Ve}from"./input-B6ZrfPbz.js";function Z(e,t){if(typeof e=="function")return e(t);e!=null&&(e.current=t)}function ee(...e){return t=>{let r=!1;const o=e.map(s=>{const a=Z(s,t);return!r&&typeof a=="function"&&(r=!0),a});if(r)return()=>{for(let s=0;s<o.length;s++){const a=o[s];typeof a=="function"?a():Z(e[s],null)}}}}function $(...e){return c.useCallback(ee(...e),e)}var F=c.forwardRef((e,t)=>{const{children:r,...o}=e,s=c.Children.toArray(r),a=s.find(Le);if(a){const i=a.props.children,l=s.map(f=>f===a?c.Children.count(i)>1?c.Children.only(null):c.isValidElement(i)?i.props.children:null:f);return n.jsx(B,{...o,ref:t,children:c.isValidElement(i)?c.cloneElement(i,void 0,l):null})}return n.jsx(B,{...o,ref:t,children:r})});F.displayName="Slot";var B=c.forwardRef((e,t)=>{const{children:r,...o}=e;if(c.isValidElement(r)){const s=Be(r);return c.cloneElement(r,{...$e(o,r.props),ref:t?ee(t,s):s})}return c.Children.count(r)>1?c.Children.only(null):null});B.displayName="SlotClone";var ke=({children:e})=>n.jsx(n.Fragment,{children:e});function Le(e){return c.isValidElement(e)&&e.type===ke}function $e(e,t){const r={...t};for(const o in t){const s=e[o],a=t[o];/^on[A-Z]/.test(o)?s&&a?r[o]=(...l)=>{a(...l),s(...l)}:s&&(r[o]=s):o==="style"?r[o]={...s,...a}:o==="className"&&(r[o]=[s,a].filter(Boolean).join(" "))}return{...e,...r}}function Be(e){var o,s;let t=(o=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:o.get,r=t&&"isReactWarning"in t&&t.isReactWarning;return r?e.ref:(t=(s=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:s.get,r=t&&"isReactWarning"in t&&t.isReactWarning,r?e.props.ref:e.props.ref||e.ref)}var Ke=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],_=Ke.reduce((e,t)=>{const r=c.forwardRef((o,s)=>{const{asChild:a,...i}=o,l=a?F:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),n.jsx(l,{...i,ref:s})});return r.displayName=`Primitive.${t}`,{...e,[t]:r}},{});function N(e,t,{checkForDefaultPrevented:r=!0}={}){return function(s){if(e==null||e(s),r===!1||!s.defaultPrevented)return t==null?void 0:t(s)}}function Ue(e){const t=e+"CollectionProvider",[r,o]=U(t),[s,a]=r(t,{collectionRef:{current:null},itemMap:new Map}),i=T=>{const{scope:p,children:C}=T,R=j.useRef(null),m=j.useRef(new Map).current;return n.jsx(s,{scope:p,itemMap:m,collectionRef:R,children:C})};i.displayName=t;const l=e+"CollectionSlot",f=j.forwardRef((T,p)=>{const{scope:C,children:R}=T,m=a(l,C),g=$(p,m.collectionRef);return n.jsx(F,{ref:g,children:R})});f.displayName=l;const d=e+"CollectionItemSlot",h="data-radix-collection-item",I=j.forwardRef((T,p)=>{const{scope:C,children:R,...m}=T,g=j.useRef(null),u=$(p,g),v=a(d,C);return j.useEffect(()=>(v.itemMap.set(g,{ref:g,...m}),()=>void v.itemMap.delete(g))),n.jsx(F,{[h]:"",ref:u,children:R})});I.displayName=d;function b(T){const p=a(e+"CollectionConsumer",T);return j.useCallback(()=>{const R=p.collectionRef.current;if(!R)return[];const m=Array.from(R.querySelectorAll(`[${h}]`));return Array.from(p.itemMap.values()).sort((v,y)=>m.indexOf(v.ref.current)-m.indexOf(y.ref.current))},[p.collectionRef,p.itemMap])}return[{Provider:i,Slot:f,ItemSlot:I},b,o]}var k="rovingFocusGroup.onEntryFocus",ze={bubbles:!1,cancelable:!0},O="RovingFocusGroup",[K,te,We]=Ue(O),[Ye,ne]=U(O,[We]),[qe,Ze]=Ye(O),oe=c.forwardRef((e,t)=>n.jsx(K.Provider,{scope:e.__scopeRovingFocusGroup,children:n.jsx(K.Slot,{scope:e.__scopeRovingFocusGroup,children:n.jsx(Je,{...e,ref:t})})}));oe.displayName=O;var Je=c.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:r,orientation:o,loop:s=!1,dir:a,currentTabStopId:i,defaultCurrentTabStopId:l,onCurrentTabStopIdChange:f,onEntryFocus:d,preventScrollOnEntryFocus:h=!1,...I}=e,b=c.useRef(null),T=$(t,b),p=H(a),[C=null,R]=z({prop:i,defaultProp:l,onChange:f}),[m,g]=c.useState(!1),u=Se(d),v=te(r),y=c.useRef(!1),[w,S]=c.useState(0);return c.useEffect(()=>{const x=b.current;if(x)return x.addEventListener(k,u),()=>x.removeEventListener(k,u)},[u]),n.jsx(qe,{scope:r,orientation:o,dir:p,loop:s,currentTabStopId:C,onItemFocus:c.useCallback(x=>R(x),[R]),onItemShiftTab:c.useCallback(()=>g(!0),[]),onFocusableItemAdd:c.useCallback(()=>S(x=>x+1),[]),onFocusableItemRemove:c.useCallback(()=>S(x=>x-1),[]),children:n.jsx(_.div,{tabIndex:m||w===0?-1:0,"data-orientation":o,...I,ref:T,style:{outline:"none",...e.style},onMouseDown:N(e.onMouseDown,()=>{y.current=!0}),onFocus:N(e.onFocus,x=>{const D=!y.current;if(x.target===x.currentTarget&&D&&!m){const A=new CustomEvent(k,ze);if(x.currentTarget.dispatchEvent(A),!A.defaultPrevented){const E=v().filter(P=>P.focusable),he=E.find(P=>P.active),Ce=E.find(P=>P.id===C),ye=[he,Ce,...E].filter(Boolean).map(P=>P.ref.current);ae(ye,h)}}y.current=!1}),onBlur:N(e.onBlur,()=>g(!1))})})}),re="RovingFocusGroupItem",se=c.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:r,focusable:o=!0,active:s=!1,tabStopId:a,...i}=e,l=be(),f=a||l,d=Ze(re,r),h=d.currentTabStopId===f,I=te(r),{onFocusableItemAdd:b,onFocusableItemRemove:T}=d;return c.useEffect(()=>{if(o)return b(),()=>T()},[o,b,T]),n.jsx(K.ItemSlot,{scope:r,id:f,focusable:o,active:s,children:n.jsx(_.span,{tabIndex:h?0:-1,"data-orientation":d.orientation,...i,ref:t,onMouseDown:N(e.onMouseDown,p=>{o?d.onItemFocus(f):p.preventDefault()}),onFocus:N(e.onFocus,()=>d.onItemFocus(f)),onKeyDown:N(e.onKeyDown,p=>{if(p.key==="Tab"&&p.shiftKey){d.onItemShiftTab();return}if(p.target!==p.currentTarget)return;const C=He(p,d.orientation,d.dir);if(C!==void 0){if(p.metaKey||p.ctrlKey||p.altKey||p.shiftKey)return;p.preventDefault();let m=I().filter(g=>g.focusable).map(g=>g.ref.current);if(C==="last")m.reverse();else if(C==="prev"||C==="next"){C==="prev"&&m.reverse();const g=m.indexOf(p.currentTarget);m=d.loop?et(m,g+1):m.slice(g+1)}setTimeout(()=>ae(m))}})})})});se.displayName=re;var Qe={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function Xe(e,t){return t!=="rtl"?e:e==="ArrowLeft"?"ArrowRight":e==="ArrowRight"?"ArrowLeft":e}function He(e,t,r){const o=Xe(e.key,r);if(!(t==="vertical"&&["ArrowLeft","ArrowRight"].includes(o))&&!(t==="horizontal"&&["ArrowUp","ArrowDown"].includes(o)))return Qe[o]}function ae(e,t=!1){const r=document.activeElement;for(const o of e)if(o===r||(o.focus({preventScroll:t}),document.activeElement!==r))return}function et(e,t){return e.map((r,o)=>e[(t+o)%e.length])}var tt=oe,nt=se,G="ToggleGroup",[le,pt]=U(G,[ne]),ce=ne(),W=j.forwardRef((e,t)=>{const{type:r,...o}=e;if(r==="single"){const s=o;return n.jsx(ot,{...s,ref:t})}if(r==="multiple"){const s=o;return n.jsx(rt,{...s,ref:t})}throw new Error(`Missing prop \`type\` expected on \`${G}\``)});W.displayName=G;var[ue,ie]=le(G),ot=j.forwardRef((e,t)=>{const{value:r,defaultValue:o,onValueChange:s=()=>{},...a}=e,[i,l]=z({prop:r,defaultProp:o,onChange:s});return n.jsx(ue,{scope:e.__scopeToggleGroup,type:"single",value:i?[i]:[],onItemActivate:l,onItemDeactivate:j.useCallback(()=>l(""),[l]),children:n.jsx(de,{...a,ref:t})})}),rt=j.forwardRef((e,t)=>{const{value:r,defaultValue:o,onValueChange:s=()=>{},...a}=e,[i=[],l]=z({prop:r,defaultProp:o,onChange:s}),f=j.useCallback(h=>l((I=[])=>[...I,h]),[l]),d=j.useCallback(h=>l((I=[])=>I.filter(b=>b!==h)),[l]);return n.jsx(ue,{scope:e.__scopeToggleGroup,type:"multiple",value:i,onItemActivate:f,onItemDeactivate:d,children:n.jsx(de,{...a,ref:t})})});W.displayName=G;var[st,at]=le(G),de=j.forwardRef((e,t)=>{const{__scopeToggleGroup:r,disabled:o=!1,rovingFocus:s=!0,orientation:a,dir:i,loop:l=!0,...f}=e,d=ce(r),h=H(i),I={role:"group",dir:h,...f};return n.jsx(st,{scope:r,rovingFocus:s,disabled:o,children:s?n.jsx(tt,{asChild:!0,...d,orientation:a,dir:h,loop:l,children:n.jsx(_.div,{...I,ref:t})}):n.jsx(_.div,{...I,ref:t})})}),M="ToggleGroupItem",pe=j.forwardRef((e,t)=>{const r=ie(M,e.__scopeToggleGroup),o=at(M,e.__scopeToggleGroup),s=ce(e.__scopeToggleGroup),a=r.value.includes(e.value),i=o.disabled||e.disabled,l={...e,pressed:a,disabled:i},f=j.useRef(null);return o.rovingFocus?n.jsx(nt,{asChild:!0,...s,focusable:!i,active:a,ref:f,children:n.jsx(J,{...l,ref:t})}):n.jsx(J,{...l,ref:t})});pe.displayName=M;var J=j.forwardRef((e,t)=>{const{__scopeToggleGroup:r,value:o,...s}=e,a=ie(M,r),i={role:"radio","aria-checked":e.pressed,"aria-pressed":void 0},l=a.type==="single"?i:void 0;return n.jsx(we,{...l,...s,ref:t,onPressedChange:f=>{f?a.onItemActivate(o):a.onItemDeactivate(o)}})}),fe=W,me=pe;const ge=c.createContext({size:"default",variant:"default"}),ve=c.forwardRef(({className:e,variant:t,size:r,children:o,...s},a)=>n.jsx(fe,{ref:a,className:X("flex items-center justify-center gap-1",e),...s,children:n.jsx(ge.Provider,{value:{variant:t,size:r},children:o})}));ve.displayName=fe.displayName;const xe=c.forwardRef(({className:e,children:t,variant:r,size:o,...s},a)=>{const i=c.useContext(ge);return n.jsx(me,{ref:a,className:X(Pe({variant:i.variant||r,size:i.size||o}),e),...s,children:t})});xe.displayName=me.displayName;const L=({text:e,itemValue:t,handleValueChange:r,valueType:o=null,selectValue:s,handleSelectValueChange:a,selectOptions:i,selectType:l=null,index:f=null})=>n.jsxs(Ne,{children:[n.jsx(Ge,{asChild:!0,children:n.jsx("h2",{children:e})}),n.jsxs(Ee,{className:"w-56",align:"start",children:[n.jsx(Ae,{children:n.jsx(De,{value:t,onChange:d=>{o===null?r(d.target.value):r(f,d.target.value,o)}})}),n.jsx(Fe,{}),n.jsx(_e,{value:s,onValueChange:d=>{l===null?a(d):r(f,d,l)},children:Object.keys(i).map((d,h)=>n.jsx(Me,{value:d,children:d},h))})]})]}),Q=({initialItemName:e="Item Name",initialOriginalPrice:t,initialPrices:r})=>{const[o,s]=c.useState(e),[a,i]=c.useState({"£":1,"€":.83,$:1.26}),[l,f]=c.useState("£"),[d,h]=c.useState(t),[I,b]=c.useState(r),[T,p]=c.useState([{name:"Tax refund",value:.8},{name:"Less Tax refund",value:.85},{name:"Black friday",value:.5}]),[C,R]=c.useState([]),m=(u,v,y)=>{b(w=>w.map((S,x)=>x===u?{...S,[y]:v}:S))},g=(u,v,y)=>{h(w=>w.map((S,x)=>x===u?{...S,[y]:v}:S))};return n.jsxs(je,{children:[n.jsx(Ie,{children:n.jsx(Te,{className:"text-lg flex items-center gap-2",children:n.jsx(L,{text:`${o} in ${l}`,itemValue:o,handleValueChange:s,selectValue:l,handleSelectValueChange:f,selectOptions:a})})}),n.jsxs(Re,{className:"space-y-2",children:[n.jsxs("h1",{className:"font-extralight text-muted-foreground",children:[n.jsx(q,{variant:"outline",onClick:()=>{Y(h,t)},children:"+"})," ","Original Price"]}),d.map((u,v)=>{const y=u.value*a[u.currency]/a[l];return n.jsx(L,{text:`${l} ${y} - ${u.name}`,itemValue:u.value,handleValueChange:g,valueType:"value",selectValue:u.currency,handleSelectValueChange:g,selectType:"currency",selectOptions:a,index:v},v)}),n.jsxs("h1",{className:"font-extralight text-muted-foreground",children:[n.jsx(q,{variant:"outline",onClick:()=>{Y(b,{name:"NewValue",value:209,currency:"€"})},children:"+"})," ","Compare Prices"]}),I.map((u,v)=>{const y=u.value*a[u.currency]/a[l];return n.jsx(L,{text:`${l} ${y} - ${u.name}`,itemValue:u.value,handleValueChange:m,valueType:"value",selectValue:u.currency,handleSelectValueChange:m,selectType:"currency",selectOptions:a,index:v},v)}),n.jsx("h1",{children:"Multipliers"}),n.jsx(ve,{type:"multiple",onValueChange:u=>R(u),children:T.map((u,v)=>n.jsxs(xe,{value:u,children:[u.name,n.jsx("span",{children:u.value})]},v))}),n.jsx("h1",{children:"Savings / Output"}),d.map((u,v)=>n.jsxs("div",{children:[n.jsx(Ve,{}),I.map((y,w)=>{let S=C.reduce((A,E)=>A*E.value,y.value);S*=a[y.currency]/a[l];const x=u.value*a[u.currency]/a[l]-S,D=100*(u.value-S)/u.value;return n.jsx("div",{children:n.jsxs("p",{className:"flex space-x-5 items-baseline",children:[n.jsx("span",{children:l}),n.jsx("span",{children:V(u.value)}),n.jsx("span",{children:V(S)}),n.jsxs("span",{className:"text-xs text-muted-foreground",children:["(saving ",V(x)," or"," ",D.toFixed(1)," %)"]}),n.jsxs("span",{className:"text-muted-foreground",children:[u.name," - ",y.name]})]})},w)})]},v))]})]})},ft=()=>n.jsx(Oe,{children:n.jsxs("div",{className:"space-y-4 w-full max-w-5xl",children:[n.jsx(Q,{initialItemName:"Pure Aero 98",initialOriginalPrice:[{name:"Tennis-point uk",value:250,currency:"£"},{name:"All things tennis uk",value:215,currency:"£"},{name:"All things tennis uk (25 voucher)",value:190,currency:"£"}],initialPrices:[{name:"Tennis-point es",value:240,currency:"€"}]}),n.jsx(Q,{initialItemName:"Yonez Ezone 98",initialOriginalPrice:[{name:"Tennis-point uk",value:220,currency:"£"},{name:"All things tennis uk",value:200,currency:"£"},{name:"All things tennis uk (25 voucher)",value:175,currency:"£"}],initialPrices:[{name:"Tennis-point es",value:220,currency:"€"}]})]})});export{ft as default};
